@using Core.Entitites
@using Core
@using System.Text

<MudTable T="ComparedBomLine" Items="(ComparedBomLines ?? Array.Empty<ComparedBomLine>().ToList()).Where(line => line.ComparisonStatus != BomLineComparisonStatus.Unchanged)">
    <HeaderContent>
        <MudTh>Quantity</MudTh>
        <MudTh>Part Number</MudTh>
        <MudTh>Designators</MudTh>
        <MudTh>Description</MudTh>
        <MudTh>Comparison Status</MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd DataLabel="Quantity">@context.Quantity</MudTd>
        <MudTd DataLabel="Part Number">@context.PartNumber</MudTd>
        <MudTd DataLabel="Designators">
            @foreach (var designator in context.Designators)
            {
                if (designator.DesignatorComparisonStatus == DesignatorComparisonStatus.Added)
                {
                    <MudText Inline="true" Color="@Color.Success">@designator.Name</MudText>
                }
                else if (designator.DesignatorComparisonStatus == DesignatorComparisonStatus.Removed)
                {
                    <MudText Style="text-decoration: line-through" Inline="true" Color="@Color.Error">@designator.Name</MudText>
                }
                else
                {
                    <MudText Inline="true">@designator.Name</MudText>
                }
                
                if (designator != context.Designators.Last())
                {
                    @:,&nbsp;
                }
            }
        </MudTd>
        <MudTd DataLabel="Description">@context.Description</MudTd>
        <MudTd DataLabel="Comparison Status">@context.ComparisonStatus</MudTd>
    </RowTemplate>
</MudTable>

@code {

    [Parameter]
    public List<ComparedBomLine>? ComparedBomLines { get; set; }

}
